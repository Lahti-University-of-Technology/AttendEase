{% extends "base.html" %}
{% load static %}
{% block extrahead %}
<link rel="stylesheet" href="{% static 'css/attendease/mark_attendance.css' %}" />
{% endblock %}
<!-- {% load crispy_forms_tags %} -->
{% block main %}
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <div class="container">
        <div class="attendance-detail-wrap">
            <div class="heading pb-3">
                <h3><u>Attendance Detail</u></h3>
            </div>
            <div class="lecture-details">
                <div>
                    <label for="html"><strong>Lecture Title:</strong> {{ lecture.title }}</label>
                </div>
                <div>
                    <label for="html"><strong>Start date & time:</strong> {{ lecture.start_date }} | {{lecture.start_time }}</label>
                </div>
                <div>
                    <label for="html"><strong>End date & time:</strong> {{ lecture.end_date }} | {{ lecture.end_time }}</label>
                </div>
                <div>
                    <label for="html"><strong>Course:</strong> {{ lecture.course }}</label>
                </div>
                <div>
                    <label for="html"><strong>Classroom:</strong> {{ lecture.classroom }}</label>
                </div>
                <div class="mark-attendance mt-3">
                    <form method="POST">
                    {% csrf_token %}
                    <button onclick="markAttendence()" class="mark-attendance px-2 py-1" type="btn">Mark Attendance</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /.content-wrapper -->
<script>
    function markAttendence() {
        // console.log($(location).attr('href'))
        // alert("Hello! I am an alert box!!");

    //     let obj = {}
        url = $(location).attr('href')
    //     fetch(url, { 
    //         method: 'post',
    //         body: JSON.stringify(obj),
    //         headers: {
    //             Accept: 'application.json',
    //             'Content-Type': 'application/json'
    //         }
    
    //         }).then(
    //         response => {
    //             console.log('response', response)
    //             // window.location.href = "https://www.tutorialrepublic.com/"
    // })

    $.ajax({
        type: "POST",
        url: url,
        success: function(){
        console.log("success")
        window.location.href = "https://www.tutorialrepublic.com/"
        },
        error: function(){
            console.log("error")
        }
        });

    }


</script>
{% endblock %}